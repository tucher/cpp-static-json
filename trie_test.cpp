#include "../template-tools/trie/trie.hpp"
#include "../template-tools/typestring/typestring.hpp"
#include "utils.h"
#include <iostream>

using namespace std;
using namespace TypeStringLiteralExploder;


using strings = std::tuple <
#if 0
TS("auspicious"),
TS("share"),
TS("merciful"),
TS("macho"),
TS("milky"),
TS("acidic"),
TS("trick"),
TS("ad hoc"),
TS("brief"),
TS("dry"),
TS("itchy"),
TS("unkempt"),
TS("bottle"),
TS("label"),
TS("great"),
TS("moldy"),
TS("normal"),
TS("placid"),
TS("dapper"),
TS("step"),
TS("sudden"),
TS("blushing"),
TS("zealous"),
TS("tedious"),
TS("escape"),
TS("curved"),
TS("abusive"),
TS("cracker"),
TS("stereotyped"),
TS("dreary"),
TS("ship"),
TS("bent"),
TS("soak"),
TS("selective"),
TS("acoustic"),
TS("present"),
TS("disgusting"),
TS("glow"),
TS("light"),
TS("existence"),
TS("useful"),
TS("x-ray"),
TS("homeless"),
TS("decorous"),
TS("overflow"),
TS("seashore"),
TS("believe"),
TS("proud"),
TS("thumb"),
TS("somber"),
TS("throne"),
TS("insect"),
TS("cobweb"),
TS("grotesque"),
TS("mix"),
TS("rich"),
TS("various"),
TS("straight"),
TS("fire"),
TS("consist"),
TS("room"),
TS("picayune"),
TS("amused"),
TS("fabulous"),
TS("gigantic"),
TS("nonstop"),
TS("assorted"),
TS("rhetorical"),
TS("branch"),
TS("possess"),
TS("pastoral"),
TS("used"),
TS("destroy"),
TS("incompetent"),
TS("destruction"),
TS("dogs"),
TS("delicate"),
TS("drip"),
TS("distinct"),
TS("aggressive"),
TS("rings"),
TS("cut"),
TS("useless"),
TS("stone"),
TS("fair"),
TS("plot"),
TS("terrify"),
TS("preach"),
TS("colossal"),
TS("shame"),
TS("surprise"),
TS("staking"),
TS("eight"),
TS("greedy"),
TS("noiseless"),
TS("rotten"),
TS("treatment"),
TS("calculator"),
TS("blind"),
TS("melt"),
TS("elastic"),
TS("spark"),
TS("quarter"),
TS("wax"),
TS("alert"),
TS("tiger"),
TS("enchanting"),
TS("superb"),
TS("hesitant"),
TS("dirt"),
TS("balance"),
TS("adjustment"),
TS("orange"),
TS("squealing"),
TS("carpenter"),
TS("show"),
TS("ray"),
TS("helpless"),
TS("psychedelic"),
TS("purring"),
TS("ugly"),
TS("capricious"),
TS("clip"),
TS("level"),
TS("lie"),
TS("trade"),
TS("salty"),
TS("tickle"),
TS("attend"),
TS("mailbox"),
TS("anger"),
TS("upbeat"),
TS("chance"),
TS("pocket"),
TS("partner"),
TS("helpful"),
TS("ancient"),
TS("amazing"),
TS("obey"),
TS("slap"),
TS("lake"),
TS("wretched"),
TS("toothpaste"),
TS("spiteful"),
TS("watch"),
TS("rainy"),
TS("worry"),
TS("comfortable"),
TS("bolt"),
TS("cow"),

TS("cause"),
TS("rinse"),
TS("bow"),
TS("ducks"),
TS("disastrous"),
TS("fallacious"),
TS("education"),
TS("men"),
TS("skinny"),
TS("hobbies"),
TS("boundless"),
TS("elegant"),
TS("disappear"),
TS("untidy"),
TS("bed"),
TS("smile"),
TS("few"),
TS("soothe"),
TS("simplistic"),
TS("utopian"),
TS("quiet"),
TS("sea"),
TS("calculate"),
TS("sparkling"),
TS("wrist"),
TS("hair"),
TS("efficacious"),
TS("charge"),
TS("early"),
TS("aquatic"),
TS("coat"),
TS("obedient"),
TS("fold"),
TS("dead"),
TS("paste"),
TS("park"),
TS("stocking"),
TS("church"),
TS("thirsty"),
TS("complex"),
TS("inform"),
TS("dream"),
TS("club"),
TS("glamorous"),
TS("hum"),
TS("rely"),
TS("thread"),
TS("festive"),
TS("prepare"),
TS("terrible"),
TS("undesirable"),
TS("closed"),
TS("tawdry"),
TS("nice"),
TS("steam"),
TS("sore"),
TS("introduce"),
TS("long"),
TS("shrug"),
TS("grandfather"),
TS("needy"),
TS("arrange"),
TS("unit"),
TS("tight"),
TS("sidewalk"),
TS("tip"),
TS("bathe"),
TS("command"),
TS("whip"),
TS("scorch"),
TS("close"),
TS("ants"),
TS("grumpy"),
TS("rake"),
TS("beds"),
TS("reject"),
TS("spare"),
TS("behavior"),
TS("gray"),
TS("humdrum"),
TS("voice"),
TS("famous"),
TS("volleyball"),
TS("cumbersome"),
TS("clever"),
TS("nerve"),
TS("rambunctious"),
TS("tranquil"),
TS("float"),
TS("stay"),
TS("fertile"),
TS("passenger"),
TS("rule"),
TS("boring"),
TS("terrific"),
TS("bite"),
TS("ratty"),
TS("scare"),
TS("explode"),
TS("mourn"),
TS("abashed"),
TS("silver"),
TS("important"),
TS("claim"),
TS("kill"),
TS("nebulous"),
TS("dress"),
TS("flag"),
TS("power"),
TS("tramp"),
TS("flowery"),
TS("dazzling"),
TS("pleasant"),
TS("old-fashioned"),
TS("cheese"),
TS("spooky"),
TS("ubiquitous"),
TS("hover"),
TS("copy"),
TS("depend"),
TS("swim"),
TS("silk"),
TS("third"),
TS("classy"),
TS("grip"),
TS("rush"),
TS("wrap"),
TS("cable"),
TS("harm"),
TS("insurance"),
TS("spectacular"),
TS("type"),
TS("discreet"),
TS("stir"),
TS("living"),
TS("letter"),
TS("electric"),
TS("list"),
TS("pop"),
TS("lovely"),
TS("bright"),
TS("use"),
TS("fail"),
TS("left"),
TS("overwrought"),
TS("tangible"),
TS("soap"),
TS("tame"),
TS("beef"),
TS("steer"),
TS("haircut"),
TS("succeed"),
TS("force"),
TS("fortunate"),
TS("youthful"),
TS("consider"),
TS("voiceless"),
TS("desk"),
TS("care"),
TS("plastic"),
TS("fresh"),
TS("sugar"),
TS("alluring"),
TS("five"),
TS("bang"),
TS("aloof"),
TS("carriage"),
TS("rampant"),
TS("abject"),
TS("pot"),
TS("squeeze"),
TS("history"),
TS("abaft"),
TS("perform"),
TS("release"),
TS("plain"),
TS("sponge"),
TS("puncture"),
TS("loving"),
TS("damaging"),
TS("suffer"),
TS("pass"),
TS("scrub"),
TS("tub"),
TS("languid"),
TS("common"),
TS("bath"),
TS("truculent"),
TS("payment"),
TS("back"),
TS("program"),
TS("rigid"),
TS("sack"),
TS("number"),
TS("pencil"),
TS("weigh"),
TS("sedate"),
TS("rod"),
TS("ambitious"),
TS("sense"),
TS("challenge"),
TS("political"),
TS("rainstorm"),
TS("guitar"),
TS("account"),
TS("nondescript"),
TS("hop"),
TS("muddle"),
TS("stimulating"),
TS("tender"),
TS("wandering"),
TS("physical"),
TS("stop"),
TS("abrasive"),
TS("disagree"),
TS("mice"),
TS("thoughtless"),
TS("gifted"),
TS("slip"),
TS("prose"),
TS("heat"),
TS("protest"),
TS("flowers"),
TS("previous"),
TS("harmony"),
TS("holiday"),
TS("notice"),
TS("chubby"),
TS("subsequent"),
TS("unique"),
TS("white"),
TS("flagrant"),
TS("religion"),
TS("psychotic"),
TS("chunky"),
TS("sweltering"),
TS("scatter"),
TS("digestion"),
TS("battle"),
TS("omniscient"),
TS("coal"),
TS("pin"),
TS("erect"),
TS("nifty"),
TS("plausible"),
TS("weight"),
TS("continue"),
TS("gleaming"),
TS("thank"),
TS("ambiguous"),
TS("phone"),
TS("iron"),
TS("truthful"),
TS("current"),
TS("arch"),
TS("fax"),
TS("serve"),
TS("end"),
TS("board"),
TS("sordid"),
TS("title"),
TS("squeal"),
TS("suppose"),
TS("delirious"),
TS("repair"),
TS("kiss"),
TS("follow"),
TS("stamp"),
TS("brave"),
TS("dangerous"),
TS("tense"),
TS("hand"),
TS("dark"),
TS("twist"),
TS("strengthen"),
TS("combative"),
TS("heavenly"),
TS("towering"),
TS("divide"),
TS("bird"),
TS("scary"),
TS("productive"),
TS("hard-to-find"),
TS("peck"),
TS("hole"),
TS("illegal"),
TS("pointless"),
TS("request"),
TS("activity"),
TS("narrow"),
TS("root"),
TS("brown"),
TS("educated"),
TS("waves"),
TS("kick"),
TS("shallow"),
TS("innate"),
TS("fierce"),
TS("statuesque"),
TS("jail"),
TS("allow"),
TS("overrated"),
TS("strange"),
TS("chicken"),
TS("meeting"),
TS("badge"),
TS("lush"),
TS("friction"),
TS("cheer"),
TS("need"),
TS("regular"),
TS("cactus"),
TS("curly"),
TS("connect"),
TS("super"),
TS("sun"),
TS("kindhearted"),
TS("mute"),
TS("half"),
TS("size"),
TS("wipe"),
TS("royal"),
TS("amount"),
TS("thunder"),
TS("pump"),
TS("gaze"),
TS("knotty"),
TS("form"),
TS("chivalrous"),
TS("toes"),
TS("pine"),
TS("elderly"),
TS("day"),
TS("wound"),
TS("wiry"),
TS("tasteless"),
TS("spy"),
TS("pet"),
TS("boast"),
TS("fearful"),
TS("guess"),
TS("absorbed"),
TS("silly"),
TS("refuse"),
TS("devilish"),
TS("greasy"),
TS("envious"),
TS("add"),
TS("door"),
TS("mend"),
TS("cup"),
TS("simple"),
TS("impress"),
TS("writing"),
TS("story"),
TS("disturbed"),
TS("transport"),
TS("practise"),
TS("awful"),
TS("worthless"),
TS("cannon"),
TS("kittens"),
TS("bare"),
TS("dizzy"),
TS("crack"),
TS("defective"),
TS("eye"),
TS("acid"),
TS("cool"),
TS("cat"),
TS("rightful"),
TS("part"),
TS("fetch"),
TS("bikes"),
TS("neat"),
TS("pear"),
TS("squeamish"),
TS("acrid"),
TS("magenta"),
TS("walk"),
TS("selfish"),
TS("tempt"),
TS("unlock"),
TS("toothsome"),
TS("bouncy"),
TS("outrageous"),
TS("zoo"),
TS("redundant"),
TS("summer"),
TS("children"),
TS("lock"),
TS("pick"),
TS("remove"),
TS("robust"),
TS("rejoice"),
TS("license"),
TS("shut"),
TS("meek"),
TS("well-groomed"),
TS("oven"),
TS("invention"),
TS("mere"),
TS("condition"),
TS("wait"),
TS("shade"),
TS("furniture"),
TS("last"),
TS("dusty"),
TS("loud"),
TS("bad"),
TS("eminent"),
TS("callous"),
TS("whistle"),
TS("fireman"),
TS("observation"),
TS("naughty"),
TS("hurry"),
TS("draconian"),
TS("trail"),
TS("didactic"),
TS("tug"),
TS("jellyfish"),
TS("shiver"),
TS("bone"),
TS("industry"),
TS("goofy"),
TS("breezy"),
TS("elfin"),
TS("frame"),
TS("food"),
TS("bump"),
TS("absent"),
TS("stormy"),
TS("increase"),
TS("hypnotic"),
TS("nut"),
TS("unusual"),
TS("turkey"),
TS("foregoing"),
TS("loaf"),
TS("slave"),
TS("grade"),
TS("anxious"),
TS("materialistic"),
TS("marry"),
TS("gentle"),
TS("cakes"),
TS("attractive"),
TS("mammoth"),
TS("hurt"),
TS("afraid"),
TS("oval"),
TS("precious"),
TS("arrive"),
TS("obsequious"),
TS("bustling"),
TS("stiff"),
TS("irritate"),
TS("stupendous"),
TS("big"),
TS("excite"),
TS("stage"),
TS("melted"),
TS("blush"),
TS("longing"),
TS("arrogant"),
TS("degree"),
TS("bee"),
TS("easy"),
TS("craven"),
TS("toys"),
TS("boundary"),
TS("frail"),
TS("flap"),
TS("periodic"),
TS("zephyr"),
TS("guarded"),
TS("tacit"),
TS("waste"),
TS("fact"),
TS("swanky"),
TS("vessel"),
TS("support"),
TS("harsh"),
TS("beautiful"),
TS("wonderful"),
TS("short"),
TS("unarmed"),
TS("successful"),
TS("awake"),
TS("intelligent"),
TS("tax"),
TS("mask"),
TS("instruct"),
TS("deserve"),
TS("meddle"),
TS("copper"),
TS("belong"),
TS("crowded"),
TS("probable"),
TS("toy"),
TS("turn"),
TS("place"),
TS("sock"),
TS("mitten"),
TS("own"),
TS("marked"),
TS("cake"),
TS("impolite"),
TS("woozy"),
TS("motionless"),
TS("coordinated"),
TS("way"),
TS("gruesome"),
TS("fork"),
TS("ticket"),
TS("lyrical"),
TS("dislike"),
TS("chilly"),
TS("desert"),
TS("letters"),
TS("reflect"),
TS("comb"),
TS("fry"),
TS("shocking"),
TS("laborer"),
TS("accessible"),
TS("young"),
TS("joyous"),
TS("wail"),
TS("entertaining"),
TS("zonked"),
TS("wink"),
TS("muddled"),
TS("welcome"),
TS("flashy"),
TS("provide"),
TS("school"),
TS("victorious"),
TS("stare"),
TS("heap"),
TS("powerful"),
TS("interest"),
TS("shoes"),
#endif
TS("push"),
TS("detect"),
TS("bruise"),
TS("bite-sized"),
TS("ludicrous"),
TS("amuck"),
TS("even"),
TS("kettle"),
TS("question"),
TS("obscene"),
TS("hook"),
TS("encouraging"),
TS("replace"),
TS("earsplitting"),
TS("tire"),
TS("veil"),
TS("wise"),
TS("water"),
TS("town"),
TS("comparison"),
TS("tan"),
TS("coast"),
TS("sad"),
TS("reign"),
TS("pest"),
TS("miscreant"),
TS("wild"),
TS("vengeful"),
TS("abounding"),
TS("hang"),
TS("choke"),
TS("infamous"),
TS("faint"),
TS("delicious"),
TS("afford"),
TS("silent"),
TS("phobic"),
TS("test"),
TS("healthy"),
TS("start"),
TS("quill"),
TS("ban"),
TS("irate"),
TS("wheel"),
TS("clap"),
TS("feeling"),
TS("curtain"),
TS("lacking"),
TS("rail"),
TS("adamant"),
TS("venomous"),
TS("stranger"),
TS("unwritten"),
TS("many"),
TS("wash"),
TS("sort"),
TS("visit"),
TS("vein"),
TS("delay"),
TS("haunt"),
TS("crooked"),
TS("whimsical"),
TS("peaceful"),
TS("annoy"),
TS("ghost"),
TS("unknown"),
TS("accurate"),
TS("quaint"),
TS("industrious"),
TS("pink"),
TS("futuristic"),
TS("pancake"),
TS("business"),
TS("married"),
TS("disillusioned"),
TS("card"),
TS("embarrass"),
TS("second"),
TS("strong"),
TS("radiate"),
TS("wealthy"),
TS("knit"),
TS("warlike"),
TS("driving"),
TS("enter"),
TS("behave"),
TS("divergent"),
TS("purpose"),
TS("ceaseless"),
TS("decision"),
TS("wiggly"),
TS("noxious"),
TS("ink"),
TS("shrill"),
TS("song"),
TS("geese"),
TS("exercise"),
TS("inexpensive"),
TS("touch"),
TS("marble"),
TS("concerned"),
TS("mellow"),
TS("low"),
TS("air"),
TS("stuff"),
TS("befitting"),
TS("deranged"),
TS("paint"),
TS("division"),
TS("ill"),
TS("utter"),
TS("north"),
TS("cycle"),
TS("icy"),
TS("calculating"),
TS("minute"),
TS("quixotic"),
TS("painful"),
TS("nose"),
TS("flawless"),
TS("crayon"),
TS("receptive"),
TS("trucks"),
TS("repeat"),
TS("jumpy"),
TS("whirl"),
TS("explain"),
TS("receive"),
TS("heartbreaking"),
TS("tangy"),
TS("billowy"),
TS("run"),
TS("flesh"),
TS("warn"),
TS("remember"),
TS("rabbits"),
TS("two"),
TS("jeans"),
TS("drain"),
TS("hungry"),
TS("faulty"),
TS("rescue"),
TS("hour"),
TS("mean"),
TS("develop"),
TS("mouth"),
TS("tough"),
TS("film"),
TS("like"),
TS("pizzas"),
TS("available"),
TS("funny"),
TS("spill"),
TS("thoughtful"),
TS("blood"),
TS("happen"),
TS("car"),


TS("pollution"),
TS("ultra"),
TS("hard"),
TS("clover"),
TS("mug"),
TS("smoke"),
TS("threatening"),
TS("fretful"),
TS("jaded"),
TS("flimsy"),
TS("knife"),
TS("nostalgic"),
TS("wool"),
TS("teaching"),
TS("regret"),
TS("trace"),
TS("pray"),
TS("week"),
TS("dock"),
TS("pull"),
TS("spoon"),
TS("exuberant"),
TS("girls"),
TS("carry"),
TS("glass"),
TS("duck"),
TS("cross"),
TS("wonder"),
TS("jolly"),
TS("post"),
TS("rub"),
TS("striped"),
TS("whisper"),
TS("yummy"),
TS("steel"),
TS("meal"),
TS("eager"),
TS("old"),

TS("expand"),
TS("polish"),
TS("sin"),
TS("brother"),
TS("broad"),
TS("silky"),
TS("ripe"),
TS("beneficial"),
TS("ready"),
TS("bubble"),
TS("aberrant"),
TS("fruit"),
TS("empty"),
TS("poison"),
TS("example"),
TS("pricey"),
TS("smelly"),
TS("lace"),
TS("reach"),
TS("impossible"),
TS("paper"),
TS("vivacious"),
TS("unwieldy"),
TS("hall"),
TS("glue"),
TS("watery"),
TS("punish"),
TS("ask"),
TS("screw"),
TS("rate"),
TS("careless"),
TS("honorable"),
TS("reward"),
TS("bucket"),
TS("pipe"),
TS("drop"),
TS("ladybug"),
TS("precede"),
TS("analyse"),
TS("swing"),
TS("lumber"),
TS("chop"),
TS("train"),
TS("maid"),
TS("permissible"),
TS("wish"),
TS("shock"),
TS("spotty"),
TS("puffy"),
TS("jam"),
TS("barbarous"),
TS("year"),
TS("company"),
TS("event"),
TS("damp"),
TS("concern"),
TS("ten"),
TS("count"),
TS("talk"),
TS("idiotic"),
TS("extra-large"),
TS("hammer"),
TS("window"),
TS("gullible"),
TS("misty"),
TS("offer"),
TS("edge"),
TS("fish"),
TS("hunt"),
TS("pets"),
TS("tacky"),
TS("decorate"),
TS("lackadaisical"),
TS("shelter"),
TS("sweater"),
TS("cute"),
TS("milk"),
TS("learned"),
TS("dramatic"),
TS("glistening"),
TS("wealth"),
TS("spring"),
TS("needle"),
TS("obese"),
TS("uncovered"),
TS("mighty"),
TS("launch"),
TS("plants"),
TS("yielding"),

TS("feeble"),
TS("abnormal"),
TS("tin"),
TS("ring"),
TS("slimy"),
TS("tank"),
TS("store"),
TS("material"),
TS("versed"),
TS("quilt"),
TS("exclusive"),
TS("jittery")
>;




int main(int , char **argv) {
    std::size_t s = 0; while(argv[1][s] != 0) s ++;
//    size_t size = s;
    char *data = argv[1];

    using Trie = StaticTrie::Trie<strings>;

    int result = -1;
    auto clb = [&](auto matchInfo) -> char {
        data ++;
        using MatchInfo = decltype (matchInfo);
//        cout << "Matched: " << endl;
//        iterateTypeTuple((typename MatchInfo::MatchedStrings*)nullptr, [](auto * s){
//            using S = typename std::remove_pointer_t<decltype (s)>::ItemT;
//            cout << "\t " << S::c_str() << endl;
//        });
//        cout << endl;

        using S = typename MatchInfo::NodeString;

        if constexpr(matchInfo.hasFull) {
//            cout << "Full Node string: " << S::c_str() << endl;
        }
        if constexpr(matchInfo.isLast) {
//            cout << "End Node!" << endl;
        }
        if constexpr(matchInfo.hasFull) {
            result = matchInfo.index;
//            cout <<  matchInfo.index << endl;
            return -1;
        }
        return *data;
    };



    //Iter endedAt = trie::search(bg, end, clb);
    //cout << "Search ended at " << endedAt -bg << endl;

    Trie::search(*data, clb);
//    cout << "Search ended at pos " << r - data << " of data " << data << endl;
    return result;
}
